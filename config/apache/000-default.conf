<VirtualHost *:80>
    # Server configuration
    ServerAdmin admin@ec-site-dev.local
    DocumentRoot /var/www/html/public
    ServerName localhost

    # Directory configuration
    <Directory /var/www/html/public>
        Options -Indexes +FollowSymLinks
        AllowOverride All
        Require all granted
        
        # Let .htaccess handle CORS and routing
        # CORS headers are now in .htaccess for better control
    </Directory>

    # URL Rewriting is now handled by .htaccess
    # This provides better flexibility and easier maintenance

    # Security headers are now managed in .htaccess
    # Development cache headers are now managed in .htaccess

    # Logging
    ErrorLog /var/log/apache2/error.log
    CustomLog /var/log/apache2/access.log combined

    # PHP Error logging
    php_flag log_errors on
    php_value error_log /var/log/apache2/php_errors.log

    # File upload settings
    php_value upload_max_filesize 64M
    php_value post_max_size 64M
    php_value max_execution_time 300
    php_value max_input_time 300
    php_value memory_limit 512M
</VirtualHost>

# Additional configuration for SSL (not used in development)
# <VirtualHost *:443>
#     ServerAdmin admin@ec-site-dev.local
#     DocumentRoot /var/www/html/public
#     ServerName localhost
#     
#     SSLEngine on
#     SSLCertificateFile /etc/ssl/certs/ssl-cert-snakeoil.pem
#     SSLCertificateKeyFile /etc/ssl/private/ssl-cert-snakeoil.key
# </VirtualHost>